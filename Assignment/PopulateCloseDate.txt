trigger PopulateCloseDate on Opportunity (before update)
{
    Iterator<Opportunity> iNew =  Trigger.new.iterator();
    Iterator<Opportunity> iOld = Trigger.old.iterator();
    
    while(iOld.hasNext() && iNew.hasNext())
    {
        Opportunity iNew1 = (Opportunity)iNew;
        Opportunity iOld1 = (Opportunity)iOld;
        
        if((iNew1.StageName == 'Closed Won' || iNew1.StageName == 'Closed Lost') && iNew1.StageName == iOld1.StageName)
        {
            iNew1.CloseDate = System.Today();
        }
    }

}